<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>NIT Trichy - Employee Details</title>
    <script src="logout.js"></script>
    <script>
        try {
          const token = localStorage.getItem("token");
        //   console.log(token)
          if (token) {
            const response = fetch("http://localhost:5001/api/staff/staff-details", {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${token}`
              }
      
            }).then(res=> res.json())
            .then( data => {
              console.log(data)
              const staffDetails = data;
              localStorage.setItem("salary", data.sal);
              localStorage.setItem("empId", data.staffNo);
                // Display staff details in HTML elements
                document.getElementById("staffNo").innerText = staffDetails.staffNo;
                document.getElementById("name").innerText = staffDetails.name;
                document.getElementById("email").innerText = staffDetails.gmail;
                document.getElementById("dept").innerText = staffDetails.dept;
                document.getElementById("webmail").innerText = staffDetails.webmail;
                document.getElementById("dob").innerText = staffDetails.dob;
                document.getElementById("mob").innerText = staffDetails.mob;
                document.getElementById("designation").innerText = staffDetails.designation;
                document.getElementById("sal").innerText = staffDetails.sal;
                document.getElementById("addr").innerText = staffDetails.addr;
            })
          }
          else {
            alert("Unauthorized user");
          }
        }
        catch (err) {
          console.log(err);
        }
      </script>
    
</head>
<body>
    <div id="toplinkbar">		
        <div class="left" style="margin-left:1%">		
          <a href="https://www.nitt.edu/home/students/facilitiesnservices/tp/">Placements</a>&nbsp;|
          <a href="https://www.nitt.edu/home/students/facilitiesnservices/library/">Library</a>&nbsp;|
          <a href="https://www.nitt.edu/home/academics/departments/">Departments</a>&nbsp;|
          <a href="https://www.nitt.edu/home/students/events/">Events</a>&nbsp;|
          <a href="https://www.nitt.edu/home/students/facilitiesnservices/ComputerSupportGroup/">CC</a>&nbsp;
        </div>   
        <div class="right" style="margin-right:1%">
          <a href="https://www.nitt.edu/home/search/">Search</a>&nbsp;|
          <a target="_blank" href="https://webmail.nitt.edu/">Webmail</a>&nbsp;|
          <a href="https://www.nitt.edu/home/sitemap/">Sitemap</a>
        </div>
    </div>

    <div id="header">
        <a href="./"><img src="https://www.nitt.edu/cms/templates/nitt_13inner/images/nitt.png" style="position: relative;bottom: 13%;position: relative;bottom:13%;width:100%;overflow:hidden;"></a>
    </div>
    <div class="cbp-af-header">
        <div class="cbp-af-inner">
            <div id="main-nav">
                <ul class="menu">
                    <li class="navigate" data-href="home"><a href="https://www.nitt.edu/">Home</a></li>
                    <li class="navigate" data-href="login" id="loginLink"><a href="./login.html">Login / Register</a></li>
                    <li class="navigate" data-href="empDetails"><a href="./empDetails.html">Employee Details</a></li>
                    <li class="navigate" data-href="familyDetails"><a href="./familyDetails.html">Family Details</a></li>
                    <li class="navigate" data-href="salary"><a href="./salary.html">Salary</a></li>
                    <li class="navigate" data-href="gps"><a href="./gps.html">GPS/NPS of Family Members</a></li>
                    <li class="navigate" data-href="contact"><a href="https://www.nitt.edu/home/contact/">Contact</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="middle">
        <div style="max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; background-color: #f9f9f9;">

            <p>Staff Number: <span id="staffNo"></span></p>
            <p>Name: <span id="name"></span></p>
            <p>Email: <span id="email"></span></p>
            <p>Department: <span id="dept"></span></p>
            <p>Webmail: <span id="webmail"></span></p>
            <p>DOB: <span id="dob"></span></p>
            <p>Mobile: <span id="mob"></span></p>
            <p>Designation: <span id="designation"></span></p>
            <p>Salary: <span id="sal"></span></p>
            <p>Address: <span id="addr"></span></p>
        
        </div>
    </div>

    <div id="footer">
        <div id="footer-content">
            <div id="footerRowOne">
                <div class="footerCol noBorder">
                    <h2><a href="./academics/">Academics</a></h2><br>
                    <ul>
                    <li><a href="./academics/programmes">Academic Programmes</a></li>
                    <li><a href="./academics/departments">Departments</a></li>
                    <li><a href="./academics/faculty">Faculty</a></li>
                    <li><a href="./academics/rules">Rules and Regulations</a></li>
                    <li class="noBorder"><a href="./academics/scholarships">Scholarships</a></li>
                    </ul>
                </div>
                <div class="footerCol">
                    <h2><a href="./admissions/">Admissions</a></h2><br>
                    <ul>
                    <li><a href="/admissions/btech">B.Tech</a>. / <a href="/admissions/barch">B.Arch.</a></li>
                    <li><a href="/admissions/mtech">M.Tech</a>. / <a href="/admissions/mtech">M.Arch.</a> </li>
                    <li><a href="/admissions/msc">M.Sc</a>. / <a href="/admissions/ma">MA</a> </li>
                    <li><a href="/admissions/mca">MCA</a> / <a href="/admissions/mba">MBA</a></li>
                    <li><a href="/admissions/ms">MS (By Research)</a></li>
                    <li class="noBorder"><a href="/admissions/phd">Ph.D.</a></li>
                    </ul>
                </div>
                <div class="footerCol">
                    <h2><a href="/students/">Student Life</a></h2><br>
                    <ul>
                    <li><a href="/students/events">Events</a></li>
                    <li><a href="/students/clubsnassocs">Clubs &amp; Associations</a></li>
                    <li><a href="/students/facilitiesnservices">Facilities &amp; Services</a></li>
                    <li><a href="/students/facilitiesnservices/hostelsnmess/">Hostel &amp; Messes</a></li>
                    <li class="noBorder"><a href="/students/office">Office of the Dean (Students)</a></li>
                    </ul>
                </div>
                <div class="footerCol">
                    <h2><a href="/other/">Other Links</a></h2><br>
                    <ul>
                    <li><a href="/other/tenders">Tenders and Notices</a></li>
                    <li><a href="/other/jobs">Job Opportunities</a></li>
                    <li><a href="/righttoinfoact">RTI</a></li>
                    <li><a href="http://alumni.nitt.edu" target="_blank">Alumni</a></li>
                    <li><a href="/sitemap">Sitemap</a></li>
                    </ul>
                </div>
                <div class="footerCol">
                    <h2><a href="/contact/">Contact Us</a></h2><br>
                    <ul style="padding-bottom:10px;">
                    <li>National Institute of Technology<br>Tiruchirappalli - 620015<br>Tamil Nadu, INDIA <br>Fax: +91-431-2500133<br></li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="copyright">
            <div id="copyrightContent">
            <p>Â© <a href="https://www.nitt.edu/home/webteam/">WebTeam NIT Trichy</a>,<br> 
                <span class="break">National Institute of Technology, Tiruchirappalli</span></p>
            </div>
        </div>
    </div>
</body>
</html>